# 利用标准外设库点亮开发板STMF103RCT6上面的LED灯

这里主要记录思路, 这个东西都是去查阅对应开发板的标准外设开发手册. 不同系列的开发板都不一样的.

[toc]

开发嵌入式, 用代码驱动 开发板上的设备 是第一步, 接下就通过第一个实验来进入到STM32开发

## 1. 电路图

我们要驱动开发板上的LED灯, 要提出解决方案的第一步, 就是看[电路图](TODO:STM32F103RCT6电路图).

打开电路图这个文档, 全局搜索`LED`

![](https://pic2.imgdb.cn/item/64648a970d2dde5777819d6d.jpg)

我们看到这个灯有三个负极, 分别接了`LED R` `LED G` `LED B`三个引脚,分别对应`PB6`,`PB7`,`PB8`这三个GPIO.

图中只画一条线,是不希望太乱了, 说明这是个三色灯. 

而且这三个引脚都接了电阻的, 电阻起限制电流的作用. 避免电流过大.

然后正极还接了3.3v的电压

那么怎么才能让灯亮起来呢, 

我们知道LED其实是发光二极管, 只有当正极线路的电压高于负级线路形成的电压差, 电流才会从正极电路流入灯, 灯才会亮, 否则不会亮

也就是说, 要点亮灯, `LED R` `LED G` `LED B`三个引脚必须, 低于正极的3.3v电压, 灯才会量.


## 2. 配置GPIO

我们知道了这个灯需要什么信号才能亮, 也知道它的引脚接入了芯片的哪个引脚

接下来的工作就是控制相应的GPIO引脚的输出信号,

### 2.1 确定输出方式

根据上一节关于GPIO的介绍, 我们知道点亮这个灯应该用推挽输出, 因为关灯需要芯片输出明确的高电平电压, 开灯需要输出明确的低电平电压.

### 3.2 查阅标准外设库开发手册

这里是[标准外设库手册](//TODO:),

全局搜索GPIO, 可以定位到GPIO主要在第10章, 接下来就是理解这些库函数的作用. 
由于每个外设库都不一样, 基本都是参照对应的开发手册查阅并使用. 
这里不按部就班的记录, 只记录几个通用的概念.

1. 任何核内外设包括GPIO基本都是设置其对应的寄存器来配置其数字信号逻辑, 完成需求功能的
2. GPIO引脚一般是分组标号的, 要找到其明确的标号组号, 来找到对应的外设有哪些寄存器,这些寄存器的作用,命名和地址, 都是用来搜索相关API的关键信息.

GPIO 常见的配置, 具体解释可以参见上一节.

1. 是输入还是输出

3. 输入模式
    - 上拉输入
    - 下拉输入
    - 浮空输入
    - 模拟输入
4. 输出模式
    - 开漏输出
    - 推挽输出
    - 复用开漏输出
    - 复用推挽输出
5. 输出速率

