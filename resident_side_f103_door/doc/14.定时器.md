
1》STM32中的定时器
| 计数方式                   | 时钟分频             | 输入/输出通道 | 互补输出 |
| -------------------------- | -------------------- | ------------- | -------- |
| 通用定时器 (TIM2，3，4，5) | 向上，向下，向上向下 | 16位时钟分频  | 4        | 无 |
| 高级定时器 (TIM1，TIM8)    | 向上，向下，向上向下 | 16位时钟分频  | 4        | 有 |
| 基本定时器 (TIM6，TIM7)    | 向上                 | 16位时钟分频  | 无       | 无 |

### 互补输出
互补输出是指在数字电路中，使用两个输出信号相互补充的方式来表示逻辑状态。其中一个信号表示逻辑高电平（通常称为正相输出），另一个信号表示逻辑低电平（通常称为反相输出）。互补输出常用于驱动电路或信号传输中，其作用是增强信号的稳定性和抗干扰能力。

互补输出的作用主要体现在以下几个方面：

1. 增强稳定性：通过使用互补输出，可以使信号在不同的逻辑状态之间切换更加稳定。当一个输出信号为高电平时，另一个输出信号必然为低电平，从而确保信号的有效性和稳定性。

2. 抗干扰能力：由于互补输出信号是相互补充的，它们在电路中传输时可以提供更好的抗干扰能力。通过采用差分信号传输的方式，互补输出可以减少对环境电磁干扰的敏感性，提高信号的可靠性。

3. 驱动能力：互补输出通常由驱动电路提供，这些驱动电路能够提供足够的电流和功率来驱动外部负载。互补输出的高和低电平可以为不同类型的负载提供适当的电压和电流，确保信号能够有效地传输和驱动。

总的来说，互补输出通过提供相互补充的信号，增强了信号的稳定性、抗干扰能力和驱动能力，使得信号在数字电路中能够更可靠地传输和操作。它在许多应用中被广泛使用，如驱动电机、控制器件、数据传输等。

### 互补输出和三相六步电机接口
STM32F10x系列单片机的互补输出接口（Complementary Output）通常用于驱动直流电机或步进电机，而不是专门用于三相六步电机。互补输出接口提供了两个互补的输出信号，即正向和反向信号，可以用来控制电机的转向和速度。

要驱动三相六步电机，通常需要使用专门的电机驱动芯片或外部电路来生成适合该类型电机的相位激励信号。这些信号通过外部电路与STM32F10x单片机进行连接，并通过单片机的GPIO（通用输入/输出）引脚进行控制。

需要注意的是，STM32F10x系列单片机并不直接提供内置的三相六步电机控制接口，因此在使用这种类型的电机时，需要结合外部电路和相应的驱动器来实现控制。

## PWM

PWM代表脉冲宽度调制（Pulse Width Modulation），是一种用于控制电子设备的技术。它通过调整脉冲信号的宽度来控制输出电平的平均值。

在PWM信号中，周期固定，而脉冲的宽度可以根据需要进行调整。通常情况下，脉冲信号的高电平表示逻辑上的"1"，而低电平表示逻辑上的"0"。通过调整高电平的持续时间（脉冲宽度），可以控制输出信号的平均电平。

PWM技术在许多领域得到广泛应用，尤其在电力电子、电机控制和调光控制等领域中常见。例如，PWM可用于调节电机的转速和扭矩，调光灯的亮度，以及控制电压和电流等。

在微控制器和嵌入式系统中，PWM通常通过定时器和计数器实现。通过设置定时器的周期和脉冲宽度，可以生成相应的PWM信号。这种技术广泛应用于控制舵机、驱动直流电机、产生音频信号等场景。

### 占空比

占空比（Duty Cycle）是指脉冲信号中高电平部分（脉冲宽度）占整个周期的比例。

在脉冲宽度调制（PWM）信号中，占空比表示高电平的时间与整个周期的比值。通常以百分比的形式表示，取值范围为0%到100%。例如，50%的占空比意味着高电平部分和低电平部分的时间相等，即脉冲信号的高电平时间等于整个周期的一半。

占空比的大小决定了输出信号的平均电平。较高的占空比会使平均电平增加，而较低的占空比则会使平均电平降低。通过调整占空比，可以实现对输出信号的精确控制。

在控制电机、调光灯、发生器等应用中，占空比常用于调节输出的功率、亮度或频率。例如，调节电机的转速可以通过改变PWM信号的占空比来实现，占空比越大转速越快，占空比越小转速越慢。

### CRR 

在STM32中，ARR代表自动重装载寄存器（Auto-reload Register）。它是定时器/计数器（Timer/Counter）模块中的一个寄存器，用于设置定时器的周期性重装载值。

ARR寄存器决定了定时器溢出的周期。当定时器计数器达到ARR的值时，定时器会发生溢出，并重新从零开始计数。通过设置ARR的值，可以控制定时器的工作周期和定时时间。

在定时器的工作模式中，ARR通常与PSC（预分频器）寄存器一起使用。PSC用于设置时钟频率的预分频值，而ARR则设置定时器的重装载值。通过调整PSC和ARR的值，可以精确地控制定时器的工作频率和定时时间。

使用ARR和PSC，可以实现各种定时、计数和PWM（脉冲宽度调制）功能。具体的使用方式和含义会根据具体的定时器类型和模式而有所不同，因此需要根据具体的STM32系列和型号查阅相关的参考文档和技术手册来获取更详细的信息。

## 定时器CH通道的有效电平

在STM32F10x系列单片机的定时器中，CH（Capture/Compare）通道的有效电平可以根据配置进行选择。具体而言，可以将CH通道的输出极性设置为高电平有效或低电平有效。

在定时器的控制寄存器中，可以通过设置CCxP位来选择CH通道的输出极性。当CCxP位为0时，CH通道的输出极性为高电平有效，意味着在计数器满足比较值时，CH通道会输出高电平信号。而当CCxP位为1时，CH通道的输出极性为低电平有效，意味着在计数器满足比较值时，CH通道会输出低电平信号。

通过设置输出极性，可以灵活地适应不同的应用场景和外部设备的要求。例如，对于某些外部设备来说，高电平有效可能更合适；而对于其他设备，则可能需要低电平有效。

需要注意的是，具体的设置方式和可用的选项可能会因具体的STM32F10x系列型号和定时器模块而有所差异。在使用定时器和CH通道时，请参考相关的参考手册和技术资料，以了解准确的配置方法和可选项。